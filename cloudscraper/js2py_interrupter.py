import sys
import js2py
from .jsfuck import jsunfuck

##########################################################################################################################################################


class js2py_interrupter():

    ##########################################################################################################################################################
    
    def solveJS(self, jsEnv, js):
        js = jsunfuck(js)

        def atob(s):
            return base64.b64decode('{}'.format(s)).decode('utf-8')

        js2py.disable_pyimport()
        context = js2py.EvalJs({'atob': atob})
        result = context.eval('{}{}'.format(jsEnv, js))
        
        return result

    ##########################################################################################################################################################
    